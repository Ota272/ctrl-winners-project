
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CapFinance Game</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">

        <main class="game-screen active" id="screen-game-main">
            <header class="app-header">
                <span class="logo-fin">CAP</span>
                <h1>–ì–õ–ê–í–ù–ê–Ø</h1>
                <div class="user-coin">FIN</div>
            </header>
            
            <div class="content-padding">
                <div class="promo-banner">
                    <div class="banner-text">
                        <h3>–¢–æ—Ä–≥—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏</h3>
                        <span class="promo-badge">–ë–µ–∑ –∫–æ–º–∏—Å—Å–∏–π</span>
                    </div>
                    <div style="font-size: 30px;">üöÄ</div> 
                </div>

                <div class="info-card">
                    <span class="card-label">–í–∞—à –∫–∞–ø–∏—Ç–∞–ª (USD)</span>
                    <h2 class="card-value" id="total-capital-display">$ 0.00</h2>
                    <span class="income-color">‚Üë 0,00%</span>
                </div>

                <h3 class="section-title">–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ!</h3>
                <div class="assets-grid">
                    <button class="asset-btn" onclick="showScreen('screen-stocks')">
                        <img src="static/images/aksii.png" alt="–ê–∫—Ü–∏–∏">
                        <span>–ê–∫—Ü–∏–∏</span>
                    </button>
                    <button class="asset-btn" onclick="showScreen('screen-crypto')">
                        <img src="static/images/kripta.png" alt="–ö—Ä–∏–ø—Ç–∞">
                        <span>–ö—Ä–∏–ø—Ç–∞</span>
                    </button>
                    <button class="asset-btn" onclick="showScreen('screen-metals')">
                        <img src="static/images/metall.png" alt="–ú–µ—Ç–∞–ª–ª—ã">
                        <span>–ú–µ—Ç–∞–ª–ª—ã</span>
                    </button>
                    <button class="asset-btn" onclick="showScreen('screen-gifts')">
                        <img src="static/images/gift.png" alt="TG Gifts">
                        <span>–ü–æ–¥–∞—Ä–∫–∏</span>
                    </button>
                    <button class="asset-btn" onclick="showScreen('screen-deposit')">
                        <img src="static/images/deposit.png" alt="–î–µ–ø–æ–∑–∏—Ç">
                        <span>–î–µ–ø–æ–∑–∏—Ç</span>
                    </button>
                    <button class="asset-btn" onclick="showScreen('screen-skins')">
                        <img src="static/images/skins.png" alt="CS2">
                        <span>–°–∫–∏–Ω—ã CS2</span>
                    </button>
                </div>

                <h3 class="section-title">–í–∞—à –ø–æ—Ä—Ç—Ñ–µ–ª—å (–í—Å–µ –∞–∫—Ç–∏–≤—ã)</h3>
                <div class="asset-list" id="all-assets-list">
                    </div>
            </div>
        </main>

        <main class="game-screen" id="screen-list-view">
            <header class="app-header">
                <button class="header-back-btn" onclick="showScreen('screen-game-main')"><i class="fa-solid fa-chevron-left"></i></button>
                <h1 id="list-view-title">–ê–ö–¢–ò–í–´</h1>
                <div style="width: 24px;"></div>
            </header>
            <div class="content-padding">
                <div class="asset-list" id="category-list-container">
                    </div>
            </div>
        </main>

        <main class="game-screen" id="screen-deposit">
             <header class="app-header">
                <button class="header-back-btn" onclick="showScreen('screen-game-main')"><i class="fa-solid fa-chevron-left"></i></button>
                <h1>–î–ï–ü–û–ó–ò–¢</h1>
                <div style="width: 24px;"></div>
            </header>
            <div class="content-padding">
                <div class="info-card">
                    <span class="card-label">–ù–∞ –≤–∫–ª–∞–¥–µ</span>
                    <h2 class="card-value" id="deposit-val-display">$ 0.00</h2>
                </div>
                <div class="exchange-block">
                    <input type="number" id="deposit-input" placeholder="–°—É–º–º–∞" class="modal-input">
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="depositAction('in')">–ü–æ–ª–æ–∂–∏—Ç—å</button>
                        <button class="btn btn-danger" onclick="depositAction('out')">–°–Ω—è—Ç—å</button>
                    </div>
                </div>
            </div>
        </main>

        <main class="game-screen" id="screen-roulette">
            <header class="app-header">
                <span class="logo-fin">FIN</span>
                <h1>–†–£–õ–ï–¢–ö–ê</h1>
                <div style="width: 24px;"></div>
            </header>
            <div class="content-padding">
                <div class="roulette-container">
                    <h3>–°—Ç–∞–≤–∫–∏ –≤—ã—Å–æ–∫–∏!</h3>
                    <p style="color:#777; font-size:0.9rem;">–¶–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∏: <strong>$2000</strong>.<br>–®–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å <strong>$50,000</strong>.</p>
                    
                    <div style="background: #eee; padding: 10px; border-radius: 10px; margin-bottom: 15px;">
                        –ë–∞–ª–∞–Ω—Å: <span id="roulette-balance" style="color: #27ae60; font-weight: bold;">$ 0.00</span>
                    </div>

                    <div class="roulette-wheel" id="wheel">
                        <div class="roulette-arrow"></div>
                    </div>
                    
                    <div class="roulette-result" id="roulette-result"></div>
                    
                    <button class="spin-btn" onclick="spinRoulette()">
                        –ö–†–£–¢–ò–¢–¨
                        <span style="display:block; font-size: 10px; font-weight: normal; opacity: 0.8;">–°–ø–∏—Å–∞–Ω–∏–µ: -$2000</span>
                    </button>
                </div>
            </div>
        </main>
        <main class="game-screen" id="screen-accounts">
            <header class="app-header">
                <span class="logo-fin">FIN</span>
                <h1>–°–ß–ï–¢–ê</h1>
                <div style="width: 24px;"></div>
            </header>
            <div class="content-padding">
                <div class="accounts-grid">
                    <div class="account-card">
                        <div class="account-info"><span class="flag-icon">üá∫üá∏</span> <b>USD</b></div>
                        <span id="acc-usd">$ 0.00</span>
                    </div>
                    <div class="account-card">
                        <div class="account-info"><span class="flag-icon">üá∞üáø</span> <b>KZT</b></div>
                        <span id="acc-kzt">‚Ç∏ 0</span>
                    </div>
                    <div class="account-card">
                        <div class="account-info"><span class="flag-icon">üáØüáµ</span> <b>JPY</b></div>
                        <span id="acc-jpy">¬• 0</span>
                    </div>
                </div>

                <div class="exchange-block">
                    <h3>–û–±–º–µ–Ω –≤–∞–ª—é—Ç</h3>
                    <div class="exchange-input-group">
                        <label>–û—Ç–∫—É–¥–∞:</label>
                        <select id="ex-from">
                            <option value="usd">USD</option>
                            <option value="kzt">KZT</option>
                            <option value="jpy">JPY</option>
                        </select>
                    </div>
                    <div class="exchange-input-group">
                        <label>–ö—É–¥–∞:</label>
                        <select id="ex-to">
                            <option value="kzt">KZT</option>
                            <option value="usd">USD</option>
                            <option value="jpy">JPY</option>
                        </select>
                    </div>
                    <div class="exchange-input-group">
                        <input type="number" id="ex-amount" placeholder="–°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞">
                    </div>
                    <button class="btn btn-primary" onclick="convertCurrency()">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
                    <p style="text-align: center; color:#999; font-size:0.8rem; margin-top:10px;">–ö–æ–º–∏—Å—Å–∏—è 0%</p>
                </div>
            </div>
        </main>

        <main class="game-screen" id="screen-rating">
            <header class="app-header">
                <span class="logo-fin">TOP</span>
                <h1>–õ–ò–î–ï–†–´</h1>
                <div style="width: 24px;"></div>
            </header>
            
            <div class="content-padding">
                <div class="info-card" style="background: linear-gradient(45deg, #f1c40f, #e67e22); color: white;">
                    <span class="card-label" style="color: rgba(255,255,255,0.8);">–°–∞–º—ã–π –±–æ–≥–∞—Ç—ã–π –∏–≥—Ä–æ–∫</span>
                    <h2 class="card-value" id="top-player-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                    <span id="top-player-cap">...</span>
                </div>

                <h3 class="section-title">–¢–æ–ø 10 –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤</h3>
                
                <div class="asset-list" id="leaderboard-list">
                    </div>
            </div>
        </main>

        <main class="game-screen" id="screen-more">
            <header class="app-header">
                <span class="logo-fin">MENU</span>
                <h1>–ú–ï–ù–Æ</h1>
                <div style="width: 24px;"></div>
            </header>
            
            <div class="content-padding">
                <div class="menu-container">

                    <a href="https://t.me/CapFinancenews" target="_blank" style="display:flex; align-items:center; padding:15px; border-bottom:1px solid #eee; color:#000; text-decoration:none; background-color: #f0f9ff;">
                        <i class="fa-brands fa-telegram" style="color:#229ED9; font-size:24px; margin-right:15px;"></i>
                        <div>
                            <span style="display:block; font-weight:600;">–ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞</span>
                            <small style="color:#777; font-size:12px;">–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª</small>
                        </div>
                        <span style="margin-left:auto; color:#ccc;">‚Ä∫</span>
                    </a>

                    <div class="menu-card-simple">
                        <a href="shop.html" class="menu-item-simple">
                            <i class="fa-solid fa-cart-shopping icon-simple" style="color: #007aff;"></i>
                            <span class="text-simple">–ú–∞–≥–∞–∑–∏–Ω</span>
                            <span class="arrow-simple">‚Ä∫</span>
                        </a>
                        <a href="rules.html" class="menu-item-simple">
                            <i class="fa-solid fa-book icon-simple" style="color: #ff3b30;"></i>
                            <span class="text-simple">–£—Å–ª–æ–≤–∏—è –∏–≥—Ä—ã</span>
                            <span class="arrow-simple">‚Ä∫</span>
                        </a>
                        <a href="offer.html" class="menu-item-simple">
                            <i class="fa-solid fa-file-contract icon-simple" style="color: #34c759;"></i>
                            <span class="text-simple">–û—Ñ–µ—Ä—Ç–∞</span>
                            <span class="arrow-simple">‚Ä∫</span>
                        </a>
                        <a href="policy.html" class="menu-item-simple">
                            <i class="fa-solid fa-shield-halved icon-simple" style="color: #5856d6;"></i>
                            <span class="text-simple">–ü–æ–ª–∏—Ç–∏–∫–∞</span>
                            <span class="arrow-simple">‚Ä∫</span>
                        </a>
                    </div>

                    <div class="menu-card-simple">
                        <a href="report.html" class="menu-item-simple warning">
                            <i class="fa-solid fa-circle-exclamation icon-simple" style="color: #f5a623;"></i>
                            <span class="text-simple">–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ</span>
                            <span class="arrow-simple">‚Ä∫</span>
                        </a>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <a href="/logout" class="btn btn-danger" style="text-align: center; display: block; text-decoration: none;">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</a>
                    </div>

                </div>
            </div>
        </main>


        <div class="modal-backdrop" id="trade-modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal()">&times;</button>
                <h3 id="m-name">Asset Name</h3>
                <h2 id="m-price">$ 0.00</h2>
                <span id="m-dynamic" style="font-weight:bold;">0%</span>
                <p style="color:#777; margin-top:5px;">–£ –≤–∞—Å –µ—Å—Ç—å: <span id="m-owned">0</span></p>
                <input type="number" id="m-amount" class="modal-input" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ">
                <div class="btn-group">
                    <button class="btn btn-success" onclick="tradeAction('buy')">–ö—É–ø–∏—Ç—å</button>
                    <button class="btn btn-danger" onclick="tradeAction('sell')">–ü—Ä–æ–¥–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <div class="modal-backdrop" id="chart-modal" style="display:none; z-index: 2000;">
            <div class="modal-content" style="max-width: 95%; height: 70vh; padding: 0; position: relative; overflow: hidden; display: flex; flex-direction: column;">
        
                <button onclick="closeChart()" style="
                    width: 100%; 
                    padding: 15px; 
                    background: #ff3b30; 
                    color: white; 
                    border: none; 
                    font-weight: bold; 
                    font-size: 1.2rem;
                    cursor: pointer;
                    z-index: 100;
                ">
                    –ó–ê–ö–†–´–¢–¨ –ì–†–ê–§–ò–ö &times;
                </button>

                <div id="tradingview_widget" style="flex-grow: 1; width: 100%;"></div>
            </div>
        </div>

        <footer class="tab-bar">
            <button class="tab-btn" onclick="showScreen('screen-roulette')">
                <i class="fa-solid fa-dharmachakra"></i>
                <span>–†—É–ª–µ—Ç–∫–∞</span>
            </button>
            <button class="tab-btn" onclick="loadLeaderboard()"> 
                <i class="fa-solid fa-trophy"></i>
                <span>–†–µ–π—Ç–∏–Ω–≥</span>
            </button>
            <button class="tab-btn active" onclick="showScreen('screen-game-main')">
                <i class="fa-solid fa-house"></i>
                <span>–ì–ª–∞–≤–Ω–∞—è</span>
            </button>
            <button class="tab-btn" onclick="showScreen('screen-accounts')">
                <i class="fa-solid fa-wallet"></i>
                <span>–°—á–µ—Ç–∞</span>
            </button>
            <button class="tab-btn" onclick="showScreen('screen-more')">
                <i class="fa-solid fa-bars"></i>
                <span>–ï—â–µ</span>
            </button>
        </footer>

    </div>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

    <script src="{{ url_for('static', filename='game.js') }}"></script>

</body>
</html>